# main.yml

variables:
  valeur: 5
  toto: "a"

stages:
  - stage: Stage1
    jobs:
      - job: Job1
        steps:
          - task: powershell@2
            inputs:
              filePath: Tests/LoadData.ps1

          - script: echo $(foo)
            displayName: read foo

          # - bash: echo "##vso[task.setvariable variable=bar;isOutput=true]$(foo)"
          #   name: step1
          #   displayName: create public variable

          - bash: echo "##vso[task.setvariable variable=bar;isOutput=true]hello"
            name: step1
            displayName: create public variable

  # - stage: Stage2
  #   variables:
  #     foo2: $[ stageDependencies.Stage1.Job1.outputs['step1.bar'] ]
  #   jobs:
  #     - job:
  #       steps:
  #         - script: echo $(foo2)
  #           displayName: read foo2
  - template: myTemplate.yml
    # parameters:
    #   # foo3: $(toto)
    #   foo3: $[ stageDependencies.Stage1.Job1.outputs['step1.bar'] ]
